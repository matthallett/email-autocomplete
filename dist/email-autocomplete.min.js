!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.emailautocomplete=e()}(this,function(){"use strict";function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,o=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,s=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),l(this,"suggest",function(t){var e=r(t.split("@"),2)[1];return(o.options.domains.filter(function(t){return 0===t.indexOf(e)}).shift()||"").replace(e,"")}),l(this,"autocomplete",function(){if(void 0===o.suggestion||o.suggestion.length<1)return!1;o.$field.value=o.$field.value+o.suggestion,o.$field.dispatchEvent(new Event("change")),o.$suggestionOverlay.innerHTML="",o.$currentVal.innerHTML="",o.suggestion=""}),l(this,"displaySuggestion",function(t){t.preventDefault();var e=o.$field.value;o.suggestion=o.suggest(e),o.$suggestionOverlay.innerHTML="",o.$suggestionOverlay.innerHTML=o.suggestion,o.$currentVal.innerHTML=e;var n=parseInt(o.fieldStyle.borderLeftWidth)+parseInt(o.fieldStyle.paddingLeft)+parseInt(o.fieldStyle.marginLeft),i=o.$currentVal.offsetWidth;o.$field.offsetWidth>i&&(o.$suggestionOverlay.style.left="".concat(n+i,"px"))}),this.$field=t,this.options=e,this.suggestion="",this.fieldStyle=getComputedStyle(this.$field);var n=document.createElement("div");n.className="eac-input-wrap",n.style.position="static"===this.fieldStyle.position?"relative":this.fieldStyle.position,n.style.fontSize=this.fieldStyle.fontSize,this.$field.parentNode.insertBefore(n,this.$field),n.appendChild(this.$field),this.$currentVal=document.createElement("span"),this.$currentVal.className="eac-currentVal";var i="visibility: hidden;position: absolute;display: inline-block;font-family: ".concat(this.fieldStyle.fontFamily,";font-weight: ").concat(this.fieldStyle.fontWeight,";letter-spacing: ").concat(this.fieldStyle.letterSpacing,";");this.$currentVal.style=i,n.appendChild(this.$currentVal);var s=parseInt(this.fieldStyle.borderTopWidth)+parseInt(this.fieldStyle.paddingTop);this.$suggestionOverlay=document.createElement("span"),this.$suggestionOverlay.className=this.options.suggClass;var a="display: block;box-sizing: content-box;line-height: ".concat(this.fieldStyle.lineHeight,";padding-top: ").concat(s,"px;padding-bottom: ").concat(s,"px;font-family: ").concat(this.fieldStyle.fontFamily,";font-weight: ").concat(this.fieldStyle.fontWeight,";letter-spacing: ").concat(this.fieldStyle.letterSpacing,";position: absolute;top: 0;left: 0;");this.$suggestionOverlay.style=a,n.appendChild(this.$suggestionOverlay),this.$field.addEventListener("keyup",this.displaySuggestion),this.$field.addEventListener("blur",this.autocomplete),this.$field.addEventListener("keydown.eac",function(t){39!==t.key&&9!==t.key||o.autocomplete()}),this.$suggestionOverlay.addEventListener("mousedown.eac touchstart.eac",this.autocomplete)}var i="eac-sugg",o=["yahoo.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","outlook.com","icloud.com"];return function(t,e){return new c(t,{domains:[].concat(n(e.domains),n(o)),suggClass:e.suggClass?e.suggClass:i})}});
